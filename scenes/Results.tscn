[gd_scene load_steps=5 format=3]

[ext_resource type="Theme" path="res://themes/neobrutalist.theme.tres" id="2"]

[sub_resource type="GDScript" id="1"]
script/source_code = "extends Control\n\n@onready var title_label: Label = $ContentPanel/VBoxContainer/Title\n@onready var score_label: Label = $ContentPanel/VBoxContainer/ScoreLabel\n@onready var best_label: Label = $ContentPanel/VBoxContainer/BestLabel\n@onready var moves_label: Label = $ContentPanel/VBoxContainer/MovesLabel\n@onready var highest_label: Label = $ContentPanel/VBoxContainer/HighestTileLabel\n@onready var currency_label: Label = $ContentPanel/VBoxContainer/CurrencyLabel\n@onready var total_currency_label: Label = $ContentPanel/VBoxContainer/TotalCurrencyLabel\n@onready var seed_label: Label = $ContentPanel/VBoxContainer/SeedLabel\n@onready var try_again_button: Button = $ContentPanel/VBoxContainer/TryAgainButton\n@onready var replay_seed_button: Button = $ContentPanel/VBoxContainer/ReplaySeedButton\n\nvar _last_seed: int = 0\nvar _last_modifiers: Array = []\n\nfunc _ready() -> void:\n\tif not try_again_button.pressed.is_connected(_on_try_again_pressed):\n\t\ttry_again_button.pressed.connect(_on_try_again_pressed)\n\tif not replay_seed_button.pressed.is_connected(_on_replay_seed_pressed):\n\t\treplay_seed_button.pressed.connect(_on_replay_seed_pressed)\n\t_populate_summary()\n\nfunc _populate_summary() -> void:\n\tvar game := get_node_or_null(\"/root/Game\")\n\tif game == null:\n\t\treturn\n\tvar result: Dictionary = {}\n\tif game.has_method(\"get_last_result\"):\n\t\tresult = game.get_last_result()\n\tvar score := int(result.get(\"score\", 0))\n\tvar best := int(result.get(\"best_score\", score))\n\tvar moves := int(result.get(\"moves\", 0))\n\tvar highest_tile := int(result.get(\"highest_tile\", 0))\n\t_last_seed = int(result.get(\"seed\", 0))\n\t_last_modifiers = result.get(\"modifiers\", [])\n\tvar currency := int(result.get(\"currency_earned\", 0))\n\tvar total_currency := int(result.get(\"currency_total\", currency))\n\tscore_label.text = \"Score: %d\" % score\n\tbest_label.text = \"Best: %d\" % best\n\tmoves_label.text = \"Moves: %d\" % moves\n\thighest_label.text = \"Highest Tile: %d\" % highest_tile\n\tcurrency_label.text = \"Currency Earned: %d\" % currency\n\ttotal_currency_label.text = \"Total Currency: %d\" % total_currency\n\tseed_label.text = _last_seed != 0 ? \"Seed: %d\" % _last_seed : \"Seed: auto\"\n\treplay_seed_button.disabled = _last_seed == 0\n\tvar reason := str(result.get(\"reason\", \"\"))\n\tif reason == \"win\":\n\t\ttitle_label.text = \"Victory!\"\n\telif reason == \"no_moves\":\n\t\ttitle_label.text = \"No Moves Left\"\n\telse:\n\t\ttitle_label.text = \"Run Complete\"\n\nfunc _on_try_again_pressed() -> void:\n\tget_tree().change_scene_to_file(\"res://scenes/Menu.tscn\")\n\nfunc _on_replay_seed_pressed() -> void:\n\tif _last_seed == 0:\n\t\treturn\n\tvar game := get_node_or_null(\"/root/Game\")\n\tif game != null:\n\t\tif game.has_method(\"configure_next_seed\"):\n\t\t\tgame.configure_next_seed(_last_seed)\n\t\tif game.has_method(\"set_pending_modifiers\"):\n\t\t\tgame.set_pending_modifiers(_last_modifiers)\n\tget_tree().change_scene_to_file(\"res://scenes/Game.tscn\")\n"

[node name="Results" type="Control"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("1")
theme = ExtResource("2")

[node name="Background" type="ColorRect" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.047059, 0.047059, 0.058824, 1)

[node name="ContentPanel" type="PanelContainer" parent="."]
anchors_preset = 8
anchor_left = 0.25
anchor_top = 0.12
anchor_right = 0.75
anchor_bottom = 0.88
grow_horizontal = 2
grow_vertical = 2
theme_type_variation = &"InfoPanel"

[node name="VBoxContainer" type="VBoxContainer" parent="ContentPanel"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1
theme_override_constants/separation = 16

[node name="Title" type="Label" parent="ContentPanel/VBoxContainer"]
text = "Run Complete"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 44

[node name="ScoreLabel" type="Label" parent="ContentPanel/VBoxContainer"]
text = "Score: 0"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 28

[node name="BestLabel" type="Label" parent="ContentPanel/VBoxContainer"]
text = "Best: 0"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 28

[node name="MovesLabel" type="Label" parent="ContentPanel/VBoxContainer"]
text = "Moves: 0"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 28

[node name="HighestTileLabel" type="Label" parent="ContentPanel/VBoxContainer"]
text = "Highest Tile: 0"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 28

[node name="CurrencyLabel" type="Label" parent="ContentPanel/VBoxContainer"]
text = "Currency Earned: 0"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 28

[node name="TotalCurrencyLabel" type="Label" parent="ContentPanel/VBoxContainer"]
text = "Total Currency: 0"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 28

[node name="SeedLabel" type="Label" parent="ContentPanel/VBoxContainer"]
text = "Seed: auto"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 24

[node name="ReplaySeedButton" type="Button" parent="ContentPanel/VBoxContainer"]
text = "Replay Seed"
disabled = true
size_flags_horizontal = 4
theme_override_font_sizes/font_size = 26

[node name="TryAgainButton" type="Button" parent="ContentPanel/VBoxContainer"]
text = "Try Again"
size_flags_horizontal = 4
theme_override_font_sizes/font_size = 26
